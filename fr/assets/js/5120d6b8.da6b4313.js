"use strict";(self.webpackChunkqa_advisor_documentation=self.webpackChunkqa_advisor_documentation||[]).push([[4915],{5413:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"user-manual/getting-started/when-defer-jquery","title":"Quand Diff\xe9rer jQuery","description":"Cette page explique comment g\xe9rer QA Advisor lorsque jQuery est diff\xe9r\xe9 ou charg\xe9 de mani\xe8re asynchrone sur votre site WordPress.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/user-manual/1-getting-started/when-defer-jquery.md","sourceDirName":"user-manual/1-getting-started","slug":"/user-manual/getting-started/when-defer-jquery","permalink":"/fr/docs/user-manual/getting-started/when-defer-jquery","draft":false,"unlisted":false,"editUrl":"https://github.com/quarka-org/docs.quarka.org/tree/main/docs/user-manual/1-getting-started/when-defer-jquery.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"userManualSidebar","previous":{"title":"Configuration des Limites de Donn\xe9es","permalink":"/fr/docs/user-manual/getting-started/set-data-limit-wpconfig"},"next":{"title":"Using QA Advisor","permalink":"/fr/docs/category/using-qa-advisor"}}');var r=i(4848),t=i(8453);const l={sidebar_position:4},o="Quand Diff\xe9rer jQuery",d={},a=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Probl\xe8mes Courants",id:"probl\xe8mes-courants",level:2},{value:"Sympt\xf4mes",id:"sympt\xf4mes",level:3},{value:"Messages d&#39;Erreur Typiques",id:"messages-derreur-typiques",level:3},{value:"Solutions",id:"solutions",level:2},{value:"Solution 1 : Exclure QA Advisor du Diff\xe9r\xe9",id:"solution-1--exclure-qa-advisor-du-diff\xe9r\xe9",level:3},{value:"Avec WP Rocket",id:"avec-wp-rocket",level:4},{value:"Avec Autoptimize",id:"avec-autoptimize",level:4},{value:"Avec W3 Total Cache",id:"avec-w3-total-cache",level:4},{value:"Solution 2 : Configuration Manuelle dans le Th\xe8me",id:"solution-2--configuration-manuelle-dans-le-th\xe8me",level:3},{value:"Solution 3 : Mode Autonome QA Advisor",id:"solution-3--mode-autonome-qa-advisor",level:3},{value:"Configuration Avanc\xe9e",id:"configuration-avanc\xe9e",level:2},{value:"D\xe9tection Automatique de jQuery",id:"d\xe9tection-automatique-de-jquery",level:3},{value:"Chargement Conditionnel",id:"chargement-conditionnel",level:3},{value:"Tests et V\xe9rification",id:"tests-et-v\xe9rification",level:2},{value:"V\xe9rifier le Fonctionnement",id:"v\xe9rifier-le-fonctionnement",level:3},{value:"Tests Automatis\xe9s",id:"tests-automatis\xe9s",level:3},{value:"Plugins d&#39;Optimisation Sp\xe9cifiques",id:"plugins-doptimisation-sp\xe9cifiques",level:2},{value:"Flying Press",id:"flying-press",level:3},{value:"LiteSpeed Cache",id:"litespeed-cache",level:3},{value:"SG Optimizer",id:"sg-optimizer",level:3},{value:"R\xe9solution de Probl\xe8mes",id:"r\xe9solution-de-probl\xe8mes",level:2},{value:"jQuery se Charge Mais QA Advisor Ne Fonctionne Pas",id:"jquery-se-charge-mais-qa-advisor-ne-fonctionne-pas",level:3},{value:"Performances Impact\xe9es",id:"performances-impact\xe9es",level:3},{value:"\xc9tapes Suivantes",id:"\xe9tapes-suivantes",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"quand-diff\xe9rer-jquery",children:"Quand Diff\xe9rer jQuery"})}),"\n",(0,r.jsx)(n.p,{children:"Cette page explique comment g\xe9rer QA Advisor lorsque jQuery est diff\xe9r\xe9 ou charg\xe9 de mani\xe8re asynchrone sur votre site WordPress."}),"\n",(0,r.jsx)(n.h2,{id:"vue-densemble",children:"Vue d'ensemble"}),"\n",(0,r.jsx)(n.p,{children:"De nombreux plugins d'optimisation des performances diff\xe9rent le chargement de jQuery pour am\xe9liorer les temps de chargement des pages. Cependant, QA Advisor d\xe9pend de jQuery pour certaines fonctionnalit\xe9s, ce qui peut causer des probl\xe8mes si jQuery n'est pas disponible au moment o\xf9 QA Advisor se charge."}),"\n",(0,r.jsx)(n.h2,{id:"probl\xe8mes-courants",children:"Probl\xe8mes Courants"}),"\n",(0,r.jsx)(n.h3,{id:"sympt\xf4mes",children:"Sympt\xf4mes"}),"\n",(0,r.jsx)(n.p,{children:"Lorsque jQuery est diff\xe9r\xe9, vous pourriez rencontrer :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Erreurs JavaScript dans la console du navigateur"}),"\n",(0,r.jsx)(n.li,{children:"Fonctionnalit\xe9s de suivi qui ne fonctionnent pas"}),"\n",(0,r.jsx)(n.li,{children:"Heatmaps qui ne s'affichent pas correctement"}),"\n",(0,r.jsx)(n.li,{children:"Donn\xe9es de session incompl\xe8tes"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"messages-derreur-typiques",children:"Messages d'Erreur Typiques"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"Uncaught ReferenceError: $ is not defined\nUncaught ReferenceError: jQuery is not defined\nUncaught TypeError: Cannot read property 'fn' of undefined\n"})}),"\n",(0,r.jsx)(n.h2,{id:"solutions",children:"Solutions"}),"\n",(0,r.jsx)(n.h3,{id:"solution-1--exclure-qa-advisor-du-diff\xe9r\xe9",children:"Solution 1 : Exclure QA Advisor du Diff\xe9r\xe9"}),"\n",(0,r.jsx)(n.p,{children:"La solution la plus simple est d'exclure les scripts QA Advisor du diff\xe9r\xe9 jQuery."}),"\n",(0,r.jsx)(n.h4,{id:"avec-wp-rocket",children:"Avec WP Rocket"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Allez dans ",(0,r.jsx)(n.strong,{children:"Param\xe8tres \u2192 WP Rocket"})]}),"\n",(0,r.jsxs)(n.li,{children:["Cliquez sur l'onglet ",(0,r.jsx)(n.strong,{children:"Optimisation des fichiers"})]}),"\n",(0,r.jsxs)(n.li,{children:["Dans ",(0,r.jsx)(n.strong,{children:"JavaScript"}),", trouvez ",(0,r.jsx)(n.strong,{children:"Charger JavaScript de fa\xe7on diff\xe9r\xe9e"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ajoutez ces exclusions dans ",(0,r.jsx)(n.strong,{children:"Scripts exclus"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/wp-content/plugins/qa-advisor/js/qahm.js\n/wp-content/plugins/qa-advisor/js/qahm-admin.js\njquery\n"})}),"\n",(0,r.jsx)(n.h4,{id:"avec-autoptimize",children:"Avec Autoptimize"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Allez dans ",(0,r.jsx)(n.strong,{children:"Param\xe8tres \u2192 Autoptimize"})]}),"\n",(0,r.jsxs)(n.li,{children:["Dans l'onglet ",(0,r.jsx)(n.strong,{children:"JavaScript"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ajoutez \xe0 ",(0,r.jsx)(n.strong,{children:"Exclure les scripts de l'optimisation"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"wp-content/plugins/qa-advisor/js/qahm.js, jquery\n"})}),"\n",(0,r.jsx)(n.h4,{id:"avec-w3-total-cache",children:"Avec W3 Total Cache"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Allez dans ",(0,r.jsx)(n.strong,{children:"Performance \u2192 Minify"})]}),"\n",(0,r.jsxs)(n.li,{children:["Dans ",(0,r.jsx)(n.strong,{children:"JS"}),", section ",(0,r.jsx)(n.strong,{children:"Operations"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ajoutez \xe0 ",(0,r.jsx)(n.strong,{children:"Never minify the following JS files"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"wp-content/plugins/qa-advisor/js/qahm.js\nwp-includes/js/jquery/jquery.js\n"})}),"\n",(0,r.jsx)(n.h3,{id:"solution-2--configuration-manuelle-dans-le-th\xe8me",children:"Solution 2 : Configuration Manuelle dans le Th\xe8me"}),"\n",(0,r.jsxs)(n.p,{children:["Ajoutez ce code au fichier ",(0,r.jsx)(n.code,{children:"functions.php"})," de votre th\xe8me :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"function qahm_ensure_jquery_loaded() {\n    // S'assurer que jQuery est charg\xe9 avant QA Advisor\n    if (is_admin()) return;\n    \n    wp_enqueue_script('jquery');\n    \n    // Forcer jQuery \xe0 se charger dans le header\n    global $wp_scripts;\n    $wp_scripts->add_data('jquery', 'group', 0);\n    $wp_scripts->add_data('jquery-core', 'group', 0);\n    $wp_scripts->add_data('jquery-migrate', 'group', 0);\n}\nadd_action('wp_enqueue_scripts', 'qahm_ensure_jquery_loaded', 1);\n\n// Exclure QA Advisor du diff\xe9r\xe9 jQuery\nfunction qahm_exclude_from_defer($tag, $handle, $src) {\n    // Scripts QA Advisor \xe0 ne pas diff\xe9rer\n    $exclude_handles = array(\n        'qahm-tracking',\n        'qahm-heatmap',\n        'jquery',\n        'jquery-core',\n        'jquery-migrate'\n    );\n    \n    if (in_array($handle, $exclude_handles)) {\n        return str_replace(' defer', '', $tag);\n    }\n    \n    return $tag;\n}\nadd_filter('script_loader_tag', 'qahm_exclude_from_defer', 10, 3);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"solution-3--mode-autonome-qa-advisor",children:"Solution 3 : Mode Autonome QA Advisor"}),"\n",(0,r.jsx)(n.p,{children:"QA Advisor peut fonctionner sans jQuery en mode autonome :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Dans wp-config.php\ndefine('QAHM_NO_JQUERY_MODE', true);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Cette option :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"D\xe9sactive les fonctionnalit\xe9s d\xe9pendantes de jQuery"}),"\n",(0,r.jsx)(n.li,{children:"Utilise du JavaScript vanilla pour le suivi de base"}),"\n",(0,r.jsx)(n.li,{children:"Peut limiter certaines fonctionnalit\xe9s avanc\xe9es"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-avanc\xe9e",children:"Configuration Avanc\xe9e"}),"\n",(0,r.jsx)(n.h3,{id:"d\xe9tection-automatique-de-jquery",children:"D\xe9tection Automatique de jQuery"}),"\n",(0,r.jsx)(n.p,{children:"Ajoutez ce code pour d\xe9tecter automatiquement si jQuery est disponible :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Script personnalis\xe9 \xe0 ajouter apr\xe8s QA Advisor\n(function() {\n    function initQAHM() {\n        if (typeof jQuery !== 'undefined') {\n            // jQuery est disponible, initialiser normalement\n            if (typeof QAHM !== 'undefined') {\n                QAHM.init();\n            }\n        } else {\n            // jQuery n'est pas disponible, r\xe9essayer apr\xe8s 100ms\n            setTimeout(initQAHM, 100);\n        }\n    }\n    \n    // Attendre que le DOM soit pr\xeat\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', initQAHM);\n    } else {\n        initQAHM();\n    }\n})();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"chargement-conditionnel",children:"Chargement Conditionnel"}),"\n",(0,r.jsx)(n.p,{children:"Pour charger QA Advisor seulement quand jQuery est disponible :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"function qahm_conditional_loading() {\n    ?>\n    <script>\n    (function() {\n        function loadQAHM() {\n            if (typeof jQuery !== 'undefined') {\n                // Charger QA Advisor\n                var script = document.createElement('script');\n                script.src = '<?php echo plugins_url('js/qahm.js', __FILE__); ?>';\n                document.head.appendChild(script);\n            } else {\n                // R\xe9essayer apr\xe8s 50ms\n                setTimeout(loadQAHM, 50);\n            }\n        }\n        \n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', loadQAHM);\n        } else {\n            loadQAHM();\n        }\n    })();\n    <\/script>\n    <?php\n}\nadd_action('wp_head', 'qahm_conditional_loading', 20);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"tests-et-v\xe9rification",children:"Tests et V\xe9rification"}),"\n",(0,r.jsx)(n.h3,{id:"v\xe9rifier-le-fonctionnement",children:"V\xe9rifier le Fonctionnement"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ouvrez les outils de d\xe9veloppement"})," de votre navigateur"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rechargez la page"})," et v\xe9rifiez l'onglet Console"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recherchez les erreurs"})," li\xe9es \xe0 jQuery ou QA Advisor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testez les fonctionnalit\xe9s"})," :","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Clic sur des \xe9l\xe9ments"}),"\n",(0,r.jsx)(n.li,{children:"D\xe9filement de page"}),"\n",(0,r.jsx)(n.li,{children:"Changement de page"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"tests-automatis\xe9s",children:"Tests Automatis\xe9s"}),"\n",(0,r.jsx)(n.p,{children:"Utilisez ce script pour tester automatiquement :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Test de fonctionnement QA Advisor\nfunction testQAHM() {\n    console.log('Test QA Advisor...');\n    \n    // V\xe9rifier jQuery\n    if (typeof jQuery === 'undefined') {\n        console.error('jQuery non disponible');\n        return false;\n    }\n    \n    // V\xe9rifier QA Advisor\n    if (typeof QAHM === 'undefined') {\n        console.error('QA Advisor non charg\xe9');\n        return false;\n    }\n    \n    // V\xe9rifier le suivi\n    if (typeof QAHM.track === 'function') {\n        console.log('QA Advisor fonctionne correctement');\n        return true;\n    }\n    \n    console.error('Fonctions QA Advisor non disponibles');\n    return false;\n}\n\n// Ex\xe9cuter le test apr\xe8s chargement\nsetTimeout(testQAHM, 2000);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"plugins-doptimisation-sp\xe9cifiques",children:"Plugins d'Optimisation Sp\xe9cifiques"}),"\n",(0,r.jsx)(n.h3,{id:"flying-press",children:"Flying Press"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Exclure QA Advisor de l'optimisation\nadd_filter('flying_press_exclude_js', function($exclude_js) {\n    $exclude_js[] = 'qa-advisor';\n    $exclude_js[] = 'qahm';\n    return $exclude_js;\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"litespeed-cache",children:"LiteSpeed Cache"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Allez dans ",(0,r.jsx)(n.strong,{children:"LiteSpeed Cache \u2192 Optimisation des pages"})]}),"\n",(0,r.jsxs)(n.li,{children:["Dans ",(0,r.jsx)(n.strong,{children:"Optimisation JS"}),", ajoutez \xe0 ",(0,r.jsx)(n.strong,{children:"Exclusions JS"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"wp-content/plugins/qa-advisor/js/qahm.js\n"})}),"\n",(0,r.jsx)(n.h3,{id:"sg-optimizer",children:"SG Optimizer"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Allez dans ",(0,r.jsx)(n.strong,{children:"SG Optimizer \u2192 Frontend"})]}),"\n",(0,r.jsxs)(n.li,{children:["Dans ",(0,r.jsx)(n.strong,{children:"JavaScript"}),", ajoutez \xe0 ",(0,r.jsx)(n.strong,{children:"Exclude from JavaScript Optimization"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"qa-advisor\nqahm\n"})}),"\n",(0,r.jsx)(n.h2,{id:"r\xe9solution-de-probl\xe8mes",children:"R\xe9solution de Probl\xe8mes"}),"\n",(0,r.jsx)(n.h3,{id:"jquery-se-charge-mais-qa-advisor-ne-fonctionne-pas",children:"jQuery se Charge Mais QA Advisor Ne Fonctionne Pas"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"V\xe9rifiez l'ordre de chargement des scripts"}),"\n",(0,r.jsx)(n.li,{children:"Assurez-vous que QA Advisor se charge apr\xe8s jQuery"}),"\n",(0,r.jsx)(n.li,{children:"V\xe9rifiez les conflits avec d'autres plugins"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performances-impact\xe9es",children:"Performances Impact\xe9es"}),"\n",(0,r.jsx)(n.p,{children:"Si exclure jQuery du diff\xe9r\xe9 impacte les performances :"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Utilisez le mode autonome QA Advisor"}),"\n",(0,r.jsx)(n.li,{children:"Chargez jQuery de mani\xe8re asynchrone mais avant QA Advisor"}),"\n",(0,r.jsx)(n.li,{children:"Optimisez d'autres aspects de votre site"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\xe9tapes-suivantes",children:"\xc9tapes Suivantes"}),"\n",(0,r.jsx)(n.p,{children:"Une fois jQuery et QA Advisor configur\xe9s correctement :"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/user-manual/screens-and-operations/dashboard",children:"Explorez le tableau de bord"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/user-manual/screens-and-operations/goals",children:"Configurez vos premiers objectifs"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/user-manual/screens-and-operations/heatmaps",children:"Apprenez \xe0 utiliser les heatmaps"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);