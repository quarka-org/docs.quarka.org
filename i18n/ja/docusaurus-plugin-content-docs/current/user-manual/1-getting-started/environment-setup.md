---
sidebar_position: 2
title: 環境セットアップ
---

# 環境セットアップ

QA Assistant で正確な追跡とスムーズなパフォーマンスを確保するために、以下のサーバーとプラグインの設定を調整することをお勧めします。

---

## 1. JavaScript の圧縮・最小化

QA Assistant が使用する JavaScript ファイルを圧縮、最小化、または結合**しないで**ください。  
一部の最適化プラグインやテーマは、実行を変更または遅延させることで追跡スクリプトに干渉する場合があります。

> ✅ キャッシュまたは最適化プラグインの設定を確認してください  
> ✅ QA Assistant スクリプトの JS 最小化または defer/async を無効にしてください

技術的な背景については、[jQuery が遅延される場合](/docs/user-manual/getting-started/when-defer-jquery)を参照してください。

---

## 2. PHP メモリ制限・実行時間

QA Assistant は日次集計中に追跡データを処理するため、大規模なサイトではメモリ集約的になる可能性があります。

以下の PHP 設定をお勧めします：

- `memory_limit`: **1024M** 以上  
- `max_execution_time`: **240** 秒以上

> 💡 これらの設定は通常、`php.ini`、`.htaccess`、またはホスティングコントロールパネルで調整できます。  
> 不明な場合は、ホスティングプロバイダーにお尋ねください。

---

## 3. プラグイン・テーマの互換性

QA Assistant は主要なプラグインやテーマのほとんどで動作します。ただし、以下をお勧めします：

- 重要なスクリプトの JavaScript defer/async を無効にする
- キャッシュプラグインが `qa-heatmap-analytics` からの出力を許可することを確認する
- グローバルイベントを変更する他の追跡ツールとの重複を避ける

---

## 4. CDN・サーバー移行

CDN（例：Cloudflare）を使用している場合、または最近サーバーを移行した場合：

- すべてのキャッシュをクリアする（ブラウザ、プラグイン、CDN）
- QA Assistant スクリプトがブロックまたは遅延されていないことを確認する
- サーバーのタイムゾーンが正しいことを確認する（データのグループ化に使用）

---

## 5. オプション：スクリプト出力の確認

追跡スクリプトが正しく読み込まれていることを確認するには：

1. **ログインしていない**状態でウェブサイトにアクセスする
2. 右クリックして「ページのソースを表示」を選択する
3. HTML で `qahm` または `qahmz` を検索する

> これらの文字列が見つからない場合、スクリプトがブロックされているか読み込まれていない可能性があります。  
> JavaScript エラーやプラグインの競合を確認してください。

---
