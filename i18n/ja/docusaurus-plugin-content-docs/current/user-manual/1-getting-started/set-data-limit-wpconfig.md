---
sidebar_position: 4
title: データ制限の設定
---

# wp-config.php でのデータ制限設定

QA Advisor では、月間データ収集制限をカスタマイズできます。デフォルトでは月間 3,000 ページビュー (Page Views) に設定されていますが、`wp-config.php` ファイルを編集することで変更可能です。

## デフォルト設定

QA Advisor は以下のデフォルト制限で動作します：

- **月間ページビュー制限**: 3,000 ページビュー
- **データ保存期間**: 12ヶ月
- **リアルタイムデータ**: 制限なし

## 制限値の変更方法

### ステップ 1: wp-config.php ファイルの場所を確認

`wp-config.php` ファイルは通常、WordPress のルートディレクトリにあります：

```
/public_html/wp-config.php
/var/www/html/wp-config.php
/home/username/public_html/wp-config.php
```

### ステップ 2: ファイルのバックアップ

変更前に必ず `wp-config.php` ファイルのバックアップを作成してください。

### ステップ 3: 設定の追加

`wp-config.php` ファイルを開き、以下の行を見つけてください：

```php
/* That's all, stop editing! Happy publishing. */
```

この行の**直前**に、以下のコードを追加します：

#### 月間制限の変更

```php
// QA Advisor 月間ページビュー制限（デフォルト: 3000）
define('QAHM_MONTHLY_PV_LIMIT', 10000);
```

#### その他の設定例

```php
// 制限を無効にする（無制限）
define('QAHM_MONTHLY_PV_LIMIT', 0);

// より小さな制限を設定（1000ページビュー）
define('QAHM_MONTHLY_PV_LIMIT', 1000);

// 大規模サイト向け設定（50000ページビュー）
define('QAHM_MONTHLY_PV_LIMIT', 50000);
```

### ステップ 4: ファイルの保存

変更を保存し、FTP クライアントまたはファイルマネージャーでファイルをアップロードします。

## 設定例

### 小規模サイト（月間 1,000 PV）

```php
// QA Advisor 設定 - 小規模サイト
define('QAHM_MONTHLY_PV_LIMIT', 1000);
```

### 中規模サイト（月間 10,000 PV）

```php
// QA Advisor 設定 - 中規模サイト
define('QAHM_MONTHLY_PV_LIMIT', 10000);
```

### 大規模サイト（月間 100,000 PV）

```php
// QA Advisor 設定 - 大規模サイト
define('QAHM_MONTHLY_PV_LIMIT', 100000);
```

### 無制限設定

```php
// QA Advisor 設定 - 無制限
define('QAHM_MONTHLY_PV_LIMIT', 0);
```

## 設定の確認方法

### 1. WordPress 管理画面での確認

1. **QA Advisor** → **設定** に移動
2. **データ制限** セクションで現在の設定を確認
3. 変更した制限値が反映されていることを確認

### 2. ダッシュボードでの確認

1. **QA Advisor** → **ダッシュボード (Dashboard)** に移動
2. 月間使用量の表示で新しい制限値を確認

## 制限に達した場合の動作

月間制限に達すると：

1. **新しいページビューの記録が停止**
   - 既存データは保持されます
   - リアルタイム表示は継続されます

2. **翌月の自動リセット**
   - 毎月1日に自動的にカウンターがリセットされます
   - データ収集が再開されます

3. **通知の表示**
   - 管理画面に制限到達の通知が表示されます

## パフォーマンスへの影響

### サーバーリソース

制限値を高く設定する場合の考慮事項：

1. **データベース容量**
   - より多くのストレージが必要になります
   - 定期的なデータベース最適化を推奨

2. **処理負荷**
   - 日次集計処理の時間が長くなる可能性があります
   - サーバーリソースの監視を推奨

3. **メモリ使用量**
   - 大量データ処理時のメモリ使用量増加
   - PHP メモリ制限の調整が必要な場合があります

### 推奨設定

サーバー環境に応じた推奨設定：

| サーバータイプ | 推奨制限値 | 備考 |
|---------------|-----------|------|
| 共有ホスティング | 1,000-5,000 | リソース制限を考慮 |
| VPS | 10,000-50,000 | サーバー仕様に応じて調整 |
| 専用サーバー | 50,000+ | 十分なリソースがある場合 |

## トラブルシューティング

### 設定が反映されない場合

1. **キャッシュのクリア**
   - WordPress キャッシュをクリア
   - ブラウザキャッシュをクリア

2. **ファイル権限の確認**
   - `wp-config.php` の権限が適切であることを確認

3. **構文エラーの確認**
   - PHP 構文エラーがないことを確認
   - セミコロンの記述忘れに注意

### よくあるエラー

**エラー: サイトが表示されない**
```php
// 間違った記述例
define('QAHM_MONTHLY_PV_LIMIT' 10000); // セミコロンとカンマが不足

// 正しい記述例
define('QAHM_MONTHLY_PV_LIMIT', 10000);
```

**エラー: 設定が認識されない**
- 定数名のスペルミスを確認
- 大文字小文字の区別に注意

## サポート

設定に関してご質問がございましたら：

- [よくある質問](/docs/faq) をご確認ください
- support@quarka.org までお問い合わせください

---

設定が完了したら、[画面と操作](/docs/user-manual/screens-and-operations) について学びましょう。
